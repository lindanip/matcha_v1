<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="/stylesheets/connection_requests.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/style.css">
    <meta charset="UTF-8">
    <meta charset="utf-8" name="viewport" content="width=device-width,initial-scale=1.0">
</head>
<body>
  <div class="bg-image"></div>
  <div class="header">
    <a href="#default" class="logo"><img id="profile_pic" src=<%= user.profile_pic%>></a>
    <div class="header-right">
      <a href="/">Home</a>
      <a href="/My_pictures">My Pictures</a>
      <a href="/chats">Chats</a>
      <a class="active" href="/connection_requests">Connection Requests</a>
      <a href="/search_match">Find Your Match</a>
      <a href="/settings">Settings</a>
      <a href="/logout">Log out</a>
    </div>
  </div>
  <div class="main">
    <h1 id="pagetitle">My connection requests</h2>
    <%
        if (connections == "none")
        {
        %>
            <h2>You have no new requests ...</h2>
        <%
        }
        else
        {
            var x = 0;
            while (connections[x])
            {
                let connection_username = connections[x].username;
                let connection_room_id = connections[x].room_id;
                let connection_firstname = connections[x].Firstname;
                let connection_lastname = connections[x].Lastname;
                let connection_profile_pic = connections[x].profile_pic;
                let connection_age = connections[x].Age;
                let connection_orientation = connections[x].Orientation;
                let connection_gender = connections[x].Gender;
                let connection_bio = connections[x].Bio
                let connection_hobby1 = connections[x].Hobby1;
                let connection_hobby2 = connections[x].Hobby2;
                let connection_hobby3 = connections[x].Hobby3;
                let connection_hobby4 = connections[x].Hobby4;
                let connection_hobby5 = connections[x].Hobby5;
                %>
                <div class="show_connection">
                  <img src=<%=connection_profile_pic%> width="100px" height="100px">
                  <h3 id="label_connection_names"><%=connection_firstname%> <%=connection_lastname%></h3>
                  <h3>Age: <%=connection_age%></h3>
                  <h3>Gender: <%=connection_gender%></h3>
                  <h3>Sexual Preference: <%=connection_orientation%></h3>
                  <h3>Biography <br><%=connection_bio%></h3>
                  <h3>Interests are: <br> <%=connection_hobby1%> <br> <%=connection_hobby2%> <br> <%=connection_hobby3%> <br> <%=connection_hobby4%> <br> <%=connection_hobby5%></h3>
                  <form action="/accept_connection" method="POST">
                      <input type="hidden" name="match_username" value=<%=connection_username%>>
                      <input type="hidden" name="match_room_id" value=<%=connection_room_id%>>
                      <button type="submit" id="profile_choose" style="color: green;">Accept Connection</button>
                  </form>
                  <form action="/decline_connection" method="POST">
                      <input type="hidden" name="match_username" value=<%=connection_username%>>
                      <button type="submit" id="profile_choose" style="color: red;">Refuse Connection</button>
                  </form>
                </div>
                <%
                x++;
            }
        }
    %>
  </div>
  </body>
</html>
